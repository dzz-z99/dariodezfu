<!DOCTYPE html>
<html lang="en">
<head>
    <!-- [Your existing head content] -->
    <style>
        /* [Your existing styles] */

        /* Full-screen iframe screensaver */
        #screensaver {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 99999;
            /* No background color here to allow iframe content to show */
        }

        #screensaver iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Overlay to capture events */
        #screensaver-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: transparent; /* Fully transparent */
            z-index: 1; /* Higher than iframe within screensaver */
        }
    </style>
</head>
<body>
    <!-- [Your existing body content] -->

    <!-- Screen saver -->
    <div id="screensaver">
        <iframe src="https://dariodezfu.li/clock"></iframe>
        <!-- Transparent overlay to capture events -->
        <div id="screensaver-overlay"></div>
    </div>

    <script>
        let idleTimeout;

        // Function to show the screensaver
        function showScreensaver() {
            document.getElementById('screensaver').style.display = 'block';
            // Start listening to events on the overlay
            document.getElementById('screensaver-overlay').addEventListener('mousemove', hideScreensaver);
            document.getElementById('screensaver-overlay').addEventListener('keydown', hideScreensaver);
            document.getElementById('screensaver-overlay').addEventListener('click', hideScreensaver);
            document.getElementById('screensaver-overlay').addEventListener('scroll', hideScreensaver);
        }

        // Function to hide the screensaver
        function hideScreensaver() {
            document.getElementById('screensaver').style.display = 'none';
            resetIdleTimer();
            // Remove event listeners from the overlay to prevent memory leaks
            document.getElementById('screensaver-overlay').removeEventListener('mousemove', hideScreensaver);
            document.getElementById('screensaver-overlay').removeEventListener('keydown', hideScreensaver);
            document.getElementById('screensaver-overlay').removeEventListener('click', hideScreensaver);
            document.getElementById('screensaver-overlay').removeEventListener('scroll', hideScreensaver);
        }

        // Reset the idle timer and set the screensaver timeout
        function resetIdleTimer() {
            clearTimeout(idleTimeout);
            idleTimeout = setTimeout(showScreensaver, 30000); // Show screensaver after 30 seconds of inactivity
        }

        // Attach event listeners to all user interactions on the main page
        function attachActivityListeners() {
            window.addEventListener('mousemove', resetIdleTimer);
            window.addEventListener('keydown', resetIdleTimer);
            window.addEventListener('click', resetIdleTimer);
            window.addEventListener('scroll', resetIdleTimer);
        }

        // Initialize the screensaver functionality
        function initializeScreensaver() {
            attachActivityListeners();
            resetIdleTimer(); // Start the idle timer on page load
        }

        initializeScreensaver();

        // [Your existing countdown timer script]
    </script>
</body>
</html>
